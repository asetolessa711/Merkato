{"numFailedTestSuites":4,"numFailedTests":17,"numPassedTestSuites":11,"numPassedTests":178,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":15,"numTotalTests":195,"openHandles":[{"message":"TCPSERVERWRAP","name":"Error","stack":"Error: TCPSERVERWRAP\n    at TCP.emitInitNative (node:internal/async_hooks:200:43)\n    at createServerHandle (node:net:1741:14)\n    at Server.setupListenHandle [as _listen2] (node:net:1784:14)\n    at listenInCluster (node:net:1865:12)\n    at Server.listen (node:net:1953:7)\n    at Test.serverAddress (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\supertest\\lib\\test.js:63:35)\n    at new Test (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\supertest\\lib\\test.js:49:14)\n    at Object.obj.<computed> [as post] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\supertest\\index.js:39:18)\n    at Object.post (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\invoiceRoutes.test.js:17:8)\n    at Promise.finally.completed (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusHook (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:978:40)\n    at _runTestsForDescribeBlock (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:775:7)\n    at _runTestsForDescribeBlock (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\jest-runner\\build\\index.js:272:16)\n    at runTest (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\jest-runner\\build\\index.js:340:7)"}],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1754318220736,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Upload Routes","POST /api/upload"],"duration":187,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Upload Routes POST /api/upload should allow vendor to upload multiple files","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1754318224582,"status":"passed","title":"should allow vendor to upload multiple files"},{"ancestorTitles":["Upload Routes","POST /api/upload"],"duration":139,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Upload Routes POST /api/upload should allow admin to upload a file","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1754318224772,"status":"passed","title":"should allow admin to upload a file"},{"ancestorTitles":["Upload Routes","POST /api/upload"],"duration":143,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Upload Routes POST /api/upload should return 400 for missing file","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318224912,"status":"passed","title":"should return 400 for missing file"},{"ancestorTitles":["Upload Routes","POST /api/upload"],"duration":96,"failing":false,"failureDetails":[{"errno":-4077,"code":"ECONNRESET","syscall":"read"}],"failureMessages":["Error: read ECONNRESET\n    at TCP.onStreamRead (node:internal/stream_base_commons:217:20)"],"fullName":"Upload Routes POST /api/upload should return 400 for invalid field name","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318225056,"status":"failed","title":"should return 400 for invalid field name"},{"ancestorTitles":["Upload Routes","POST /api/upload"],"duration":125,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Upload Routes POST /api/upload should handle valid JPEG upload","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318225154,"status":"passed","title":"should handle valid JPEG upload"},{"ancestorTitles":["Upload Routes","POST /api/upload"],"duration":111,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Upload Routes POST /api/upload should handle text file upload","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318225281,"status":"passed","title":"should handle text file upload"},{"ancestorTitles":["Upload Routes","POST /api/upload"],"duration":96,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Upload Routes POST /api/upload should handle exe file upload","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318225394,"status":"passed","title":"should handle exe file upload"},{"ancestorTitles":["Upload Routes","POST /api/upload"],"duration":126,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Upload Routes POST /api/upload should reject file over size limit (2MB)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318225492,"status":"passed","title":"should reject file over size limit (2MB)"},{"ancestorTitles":["Upload Routes","POST /api/upload"],"duration":17,"failing":false,"failureDetails":[{"code":"ABORTED","method":"POST","url":"http://127.0.0.1:60517/api/upload"}],"failureMessages":["Error: Aborted\n    at Test.<anonymous> (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:276:23)\n    at Test.emit (node:events:517:28)\n    at Test.emit [as abort] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:486:8)\n    at FormData.abort (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:286:12)\n    at FormData.emit (node:events:529:35)\n    at FormData.CombinedStream._emitError (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\combined-stream\\lib\\combined_stream.js:207:8)\n    at DelayedStream.<anonymous> (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\combined-stream\\lib\\combined_stream.js:133:10)\n    at DelayedStream.emit (node:events:529:35)\n    at DelayedStream._handleEmit (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\delayed-stream\\lib\\delayed_stream.js:82:15)\n    at ReadStream.source.emit (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\delayed-stream\\lib\\delayed_stream.js:29:19)\n    at emitErrorNT (node:internal/streams/destroy:151:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:116:3)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)"],"fullName":"Upload Routes POST /api/upload should prevent directory traversal in filename","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318225620,"status":"failed","title":"should prevent directory traversal in filename"},{"ancestorTitles":["Upload Routes","GET /uploads/:filename (static file check)"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Upload Routes GET /uploads/:filename (static file check) should serve uploaded file if accessible","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754318225651,"status":"passed","title":"should serve uploaded file if accessible"},{"ancestorTitles":["Upload Routes","GET /uploads/:filename (static file check)"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Upload Routes GET /uploads/:filename (static file check) should return 404 for non-existent file","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318225670,"status":"passed","title":"should return 404 for non-existent file"}],"endTime":1754318225707,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUpload Routes › POST /api/upload › should return 400 for invalid field name\u001b[39m\u001b[22m\n\n    read ECONNRESET\n\u001b[2m\u001b[22m\n\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUpload Routes › POST /api/upload › should prevent directory traversal in filename\u001b[39m\u001b[22m\n\n    Aborted\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.<anonymous> (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:276:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.emit [as abort] (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:486:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat FormData.abort (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:286:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat FormData.CombinedStream._emitError (\u001b[22m\u001b[2mnode_modules/combined-stream/lib/combined_stream.js\u001b[2m:207:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat DelayedStream.<anonymous> (\u001b[22m\u001b[2mnode_modules/combined-stream/lib/combined_stream.js\u001b[2m:133:10)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat DelayedStream._handleEmit (\u001b[22m\u001b[2mnode_modules/delayed-stream/lib/delayed_stream.js\u001b[2m:82:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat ReadStream.source.emit (\u001b[22m\u001b[2mnode_modules/delayed-stream/lib/delayed_stream.js\u001b[2m:29:19)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\uploadRoutes.test.js","startTime":1754318220808,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Support Routes","POST /api/support"],"duration":146,"failing":false,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m)\u001b[22m\n\nExpected path: \u001b[32m\"_id\"\u001b[39m\nReceived path: \u001b[31m[]\u001b[39m\n\nReceived value: \u001b[31m{\"message\": \"Support message submitted\"}\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m)\u001b[22m\n\nExpected path: \u001b[32m\"_id\"\u001b[39m\nReceived path: \u001b[31m[]\u001b[39m\n\nReceived value: \u001b[31m{\"message\": \"Support message submitted\"}\u001b[39m\n    at Object.toHaveProperty (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\supportRoutes.test.js:61:26)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Support Routes POST /api/support should allow user to submit a support ticket","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318228386,"status":"failed","title":"should allow user to submit a support ticket"},{"ancestorTitles":["Support Routes","POST /api/support"],"duration":156,"failing":false,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m)\u001b[22m\n\nExpected path: \u001b[32m\"_id\"\u001b[39m\nReceived path: \u001b[31m[]\u001b[39m\n\nReceived value: \u001b[31m{\"message\": \"Support message submitted\"}\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m)\u001b[22m\n\nExpected path: \u001b[32m\"_id\"\u001b[39m\nReceived path: \u001b[31m[]\u001b[39m\n\nReceived value: \u001b[31m{\"message\": \"Support message submitted\"}\u001b[39m\n    at Object.toHaveProperty (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\supportRoutes.test.js:80:26)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Support Routes POST /api/support should allow second user to submit ticket","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318228534,"status":"failed","title":"should allow second user to submit ticket"},{"ancestorTitles":["Support Routes","POST /api/support"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes POST /api/support should reject submission without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318228693,"status":"passed","title":"should reject submission without token"},{"ancestorTitles":["Support Routes","POST /api/support"],"duration":76,"failing":false,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\nExpected value: \u001b[32m500\u001b[39m\nReceived array: \u001b[31m[400, 401, 422, 403]\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\nExpected value: \u001b[32m500\u001b[39m\nReceived array: \u001b[31m[400, 401, 422, 403]\u001b[39m\n    at Object.toContain (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\supportRoutes.test.js:98:36)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Support Routes POST /api/support should return 400 for missing fields","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318228705,"status":"failed","title":"should return 400 for missing fields"},{"ancestorTitles":["Support Routes","GET /api/support/user"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes GET /api/support/user should allow user to view their own tickets","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318228783,"status":"passed","title":"should allow user to view their own tickets"},{"ancestorTitles":["Support Routes","GET /api/support/user"],"duration":13,"failing":false,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\nExpected value: \u001b[32m404\u001b[39m\nReceived array: \u001b[31m[200, 403]\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\nExpected value: \u001b[32m404\u001b[39m\nReceived array: \u001b[31m[200, 403]\u001b[39m\n    at Object.toContain (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\supportRoutes.test.js:121:26)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Support Routes GET /api/support/user should allow second user to view their own tickets","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318228799,"status":"failed","title":"should allow second user to view their own tickets"},{"ancestorTitles":["Support Routes","GET /api/support/user"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes GET /api/support/user should block unauthenticated access","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318228813,"status":"passed","title":"should block unauthenticated access"},{"ancestorTitles":["Support Routes","GET /api/support"],"duration":71,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes GET /api/support should allow admin to view all tickets","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318228820,"status":"passed","title":"should allow admin to view all tickets"},{"ancestorTitles":["Support Routes","GET /api/support"],"duration":78,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes GET /api/support should support category filtering if implemented","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318228892,"status":"passed","title":"should support category filtering if implemented"},{"ancestorTitles":["Support Routes","GET /api/support"],"duration":80,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes GET /api/support should block non-admin from viewing all tickets","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318228971,"status":"passed","title":"should block non-admin from viewing all tickets"},{"ancestorTitles":["Support Routes","PUT /api/support/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes PUT /api/support/:id should allow admin to update ticket status and response","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318229053,"status":"passed","title":"should allow admin to update ticket status and response"},{"ancestorTitles":["Support Routes","PUT /api/support/:id"],"duration":78,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes PUT /api/support/:id should return 400 for malformed ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318229055,"status":"passed","title":"should return 400 for malformed ID"},{"ancestorTitles":["Support Routes","PUT /api/support/:id"],"duration":83,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes PUT /api/support/:id should return 404 for non-existent ticket","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318229135,"status":"passed","title":"should return 404 for non-existent ticket"},{"ancestorTitles":["Support Routes","PUT /api/support/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes PUT /api/support/:id should block non-admin from updating ticket","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318229220,"status":"passed","title":"should block non-admin from updating ticket"},{"ancestorTitles":["Support Routes","PUT /api/support/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes PUT /api/support/:id should block another user from updating ticket","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318229222,"status":"passed","title":"should block another user from updating ticket"},{"ancestorTitles":["Support Routes","DELETE /api/support/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes DELETE /api/support/:id should allow admin to delete a ticket","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318229224,"status":"passed","title":"should allow admin to delete a ticket"},{"ancestorTitles":["Support Routes","DELETE /api/support/:id"],"duration":14,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes DELETE /api/support/:id should return 400 for malformed ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318229225,"status":"passed","title":"should return 400 for malformed ID"},{"ancestorTitles":["Support Routes","DELETE /api/support/:id"],"duration":14,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes DELETE /api/support/:id should return 404 for non-existent ticket","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318229240,"status":"passed","title":"should return 404 for non-existent ticket"},{"ancestorTitles":["Support Routes","DELETE /api/support/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes DELETE /api/support/:id should block non-admin from deleting ticket","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318229255,"status":"passed","title":"should block non-admin from deleting ticket"},{"ancestorTitles":["Support Routes","DELETE /api/support/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Support Routes DELETE /api/support/:id should block another user from deleting ticket","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318229257,"status":"passed","title":"should block another user from deleting ticket"}],"endTime":1754318229296,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mSupport Routes › POST /api/support › should allow user to submit a support ticket\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected path: \u001b[32m\"_id\"\u001b[39m\n    Received path: \u001b[31m[]\u001b[39m\n\n    Received value: \u001b[31m{\"message\": \"Support message submitted\"}\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 59 |\u001b[39m       expect([\u001b[35m201\u001b[39m\u001b[33m,\u001b[39m \u001b[35m200\u001b[39m\u001b[33m,\u001b[39m \u001b[35m401\u001b[39m\u001b[33m,\u001b[39m \u001b[35m403\u001b[39m])\u001b[33m.\u001b[39mtoContain(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 60 |\u001b[39m       \u001b[36mif\u001b[39m ([\u001b[35m201\u001b[39m\u001b[33m,\u001b[39m \u001b[35m200\u001b[39m]\u001b[33m.\u001b[39mincludes(res\u001b[33m.\u001b[39mstatusCode)) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 61 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'_id'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 62 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'subject'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 63 |\u001b[39m         ticketId \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 64 |\u001b[39m       }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toHaveProperty (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/supportRoutes.test.js\u001b[39m\u001b[0m\u001b[2m:61:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mSupport Routes › POST /api/support › should allow second user to submit ticket\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected path: \u001b[32m\"_id\"\u001b[39m\n    Received path: \u001b[31m[]\u001b[39m\n\n    Received value: \u001b[31m{\"message\": \"Support message submitted\"}\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 78 |\u001b[39m       expect([\u001b[35m201\u001b[39m\u001b[33m,\u001b[39m \u001b[35m200\u001b[39m\u001b[33m,\u001b[39m \u001b[35m403\u001b[39m])\u001b[33m.\u001b[39mtoContain(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 79 |\u001b[39m       \u001b[36mif\u001b[39m ([\u001b[35m201\u001b[39m\u001b[33m,\u001b[39m \u001b[35m200\u001b[39m]\u001b[33m.\u001b[39mincludes(res\u001b[33m.\u001b[39mstatusCode)) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 80 |\u001b[39m         expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'_id'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 81 |\u001b[39m         secondTicketId \u001b[33m=\u001b[39m res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39m_id\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 82 |\u001b[39m       }\u001b[22m\n\u001b[2m     \u001b[90m 83 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toHaveProperty (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/supportRoutes.test.js\u001b[39m\u001b[0m\u001b[2m:80:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mSupport Routes › POST /api/support › should return 400 for missing fields\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n    Expected value: \u001b[32m500\u001b[39m\n    Received array: \u001b[31m[400, 401, 422, 403]\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  96 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m userToken)\u001b[22m\n\u001b[2m     \u001b[90m  97 |\u001b[39m         \u001b[33m.\u001b[39msend({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  98 |\u001b[39m       expect([\u001b[35m400\u001b[39m\u001b[33m,\u001b[39m \u001b[35m401\u001b[39m\u001b[33m,\u001b[39m \u001b[35m422\u001b[39m\u001b[33m,\u001b[39m \u001b[35m403\u001b[39m])\u001b[33m.\u001b[39mtoContain(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 101 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toContain (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/supportRoutes.test.js\u001b[39m\u001b[0m\u001b[2m:98:36)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mSupport Routes › GET /api/support/user › should allow second user to view their own tickets\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n    Expected value: \u001b[32m404\u001b[39m\n    Received array: \u001b[31m[200, 403]\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 119 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m secondUserToken)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 120 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 121 |\u001b[39m       expect([\u001b[35m200\u001b[39m\u001b[33m,\u001b[39m \u001b[35m403\u001b[39m])\u001b[33m.\u001b[39mtoContain(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 122 |\u001b[39m       \u001b[36mif\u001b[39m (res\u001b[33m.\u001b[39mstatusCode \u001b[33m===\u001b[39m \u001b[35m200\u001b[39m) {\u001b[22m\n\u001b[2m     \u001b[90m 123 |\u001b[39m         expect(\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39misArray(res\u001b[33m.\u001b[39mbody))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 124 |\u001b[39m       }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toContain (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/supportRoutes.test.js\u001b[39m\u001b[0m\u001b[2m:121:26)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\supportRoutes.test.js","startTime":1754318225745,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Review Routes","POST /api/products/:productId/reviews"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Routes POST /api/products/:productId/reviews should create a review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318231875,"status":"passed","title":"should create a review"},{"ancestorTitles":["Review Routes","POST /api/products/:productId/reviews"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Routes POST /api/products/:productId/reviews should fail without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318231878,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Review Routes","POST /api/products/:productId/reviews"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Routes POST /api/products/:productId/reviews should return 400 for missing rating or comment","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318231879,"status":"passed","title":"should return 400 for missing rating or comment"},{"ancestorTitles":["Review Routes","POST /api/products/:productId/reviews"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Routes POST /api/products/:productId/reviews should prevent duplicate reviews by same user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318231887,"status":"passed","title":"should prevent duplicate reviews by same user"},{"ancestorTitles":["Review Routes","PUT /api/reviews/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Routes PUT /api/reviews/:id should update a review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318231888,"status":"passed","title":"should update a review"},{"ancestorTitles":["Review Routes","PUT /api/reviews/:id"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Routes PUT /api/reviews/:id should return 400 for malformed ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318231889,"status":"passed","title":"should return 400 for malformed ID"},{"ancestorTitles":["Review Routes","PUT /api/reviews/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Routes PUT /api/reviews/:id should not allow another user to update review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318231898,"status":"passed","title":"should not allow another user to update review"},{"ancestorTitles":["Review Routes","DELETE /api/reviews/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Routes DELETE /api/reviews/:id should delete a review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318231899,"status":"passed","title":"should delete a review"},{"ancestorTitles":["Review Routes","DELETE /api/reviews/:id"],"duration":136,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Routes DELETE /api/reviews/:id should return 404 for non-existent review","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318231901,"status":"passed","title":"should return 404 for non-existent review"},{"ancestorTitles":["Review Routes","DELETE /api/reviews/:id"],"duration":72,"failing":false,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\nExpected value: \u001b[32m500\u001b[39m\nReceived array: \u001b[31m[400, 404, 401, 403]\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\nExpected value: \u001b[32m500\u001b[39m\nReceived array: \u001b[31m[400, 404, 401, 403]\u001b[39m\n    at Object.toContain (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\reviewRoutes.test.js:171:36)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Review Routes DELETE /api/reviews/:id should return 400 for malformed ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232038,"status":"failed","title":"should return 400 for malformed ID"},{"ancestorTitles":["Review Routes","DELETE /api/reviews/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Routes DELETE /api/reviews/:id should not allow another user to delete review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232111,"status":"passed","title":"should not allow another user to delete review"},{"ancestorTitles":["Review Routes","DELETE /api/reviews/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Routes DELETE /api/reviews/:id should allow admin to delete any review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232112,"status":"passed","title":"should allow admin to delete any review"},{"ancestorTitles":["Review Routes","GET /api/reviews/product/:productId"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Routes GET /api/reviews/product/:productId should return reviews for product","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232114,"status":"passed","title":"should return reviews for product"},{"ancestorTitles":["Review Routes","GET /api/reviews/product/:productId"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Routes GET /api/reviews/product/:productId should return 400 for malformed ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318232114,"status":"passed","title":"should return 400 for malformed ID"}],"endTime":1754318232146,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mReview Routes › DELETE /api/reviews/:id › should return 400 for malformed ID\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n    Expected value: \u001b[32m500\u001b[39m\n    Received array: \u001b[31m[400, 404, 401, 403]\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 169 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m'/api/reviews/notValidId'\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 170 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m userToken)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 171 |\u001b[39m       expect([\u001b[35m400\u001b[39m\u001b[33m,\u001b[39m \u001b[35m404\u001b[39m\u001b[33m,\u001b[39m \u001b[35m401\u001b[39m\u001b[33m,\u001b[39m \u001b[35m403\u001b[39m])\u001b[33m.\u001b[39mtoContain(res\u001b[33m.\u001b[39mstatusCode)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 172 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 173 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 174 |\u001b[39m     test(\u001b[32m'should not allow another user to delete review'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toContain (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/reviewRoutes.test.js\u001b[39m\u001b[0m\u001b[2m:171:36)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\reviewRoutes.test.js","startTime":1754318229324,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Invoice Routes","GET /api/invoices/:orderId"],"duration":0,"failing":false,"failureDetails":[{"code":"ERR_HTTP_INVALID_HEADER_VALUE"}],"failureMessages":["TypeError: Invalid value \"undefined\" for header \"Authorization\"\n    at ClientRequest.setHeader (node:_http_outgoing:658:3)\n    at Test.setHeader [as request] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:830:39)\n    at Test.request [as end] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:965:8)\n    at Test.end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\supertest\\lib\\test.js:133:11)\n    at end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:283:12)\n    at new Promise (<anonymous>)\n    at Test.RequestBase.then (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:265:31)"],"fullName":"Invoice Routes GET /api/invoices/:orderId should fail without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232976,"status":"failed","title":"should fail without token"},{"ancestorTitles":["Invoice Routes","GET /api/invoices/:orderId"],"duration":0,"failing":false,"failureDetails":[{"code":"ERR_HTTP_INVALID_HEADER_VALUE"}],"failureMessages":["TypeError: Invalid value \"undefined\" for header \"Authorization\"\n    at ClientRequest.setHeader (node:_http_outgoing:658:3)\n    at Test.setHeader [as request] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:830:39)\n    at Test.request [as end] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:965:8)\n    at Test.end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\supertest\\lib\\test.js:133:11)\n    at end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:283:12)\n    at new Promise (<anonymous>)\n    at Test.RequestBase.then (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:265:31)"],"fullName":"Invoice Routes GET /api/invoices/:orderId should return invoice for valid order (user)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232978,"status":"failed","title":"should return invoice for valid order (user)"},{"ancestorTitles":["Invoice Routes","GET /api/invoices/:orderId"],"duration":0,"failing":false,"failureDetails":[{"code":"ERR_HTTP_INVALID_HEADER_VALUE"}],"failureMessages":["TypeError: Invalid value \"undefined\" for header \"Authorization\"\n    at ClientRequest.setHeader (node:_http_outgoing:658:3)\n    at Test.setHeader [as request] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:830:39)\n    at Test.request [as end] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:965:8)\n    at Test.end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\supertest\\lib\\test.js:133:11)\n    at end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:283:12)\n    at new Promise (<anonymous>)\n    at Test.RequestBase.then (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:265:31)"],"fullName":"Invoice Routes GET /api/invoices/:orderId should return 404 or 403 for non-existent or unauthorized order","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232978,"status":"failed","title":"should return 404 or 403 for non-existent or unauthorized order"},{"ancestorTitles":["Invoice Routes","GET /api/invoices/:orderId"],"duration":0,"failing":false,"failureDetails":[{"code":"ERR_HTTP_INVALID_HEADER_VALUE"}],"failureMessages":["TypeError: Invalid value \"undefined\" for header \"Authorization\"\n    at ClientRequest.setHeader (node:_http_outgoing:658:3)\n    at Test.setHeader [as request] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:830:39)\n    at Test.request [as end] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:965:8)\n    at Test.end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\supertest\\lib\\test.js:133:11)\n    at end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:283:12)\n    at new Promise (<anonymous>)\n    at Test.RequestBase.then (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:265:31)"],"fullName":"Invoice Routes GET /api/invoices/:orderId should return 400 for malformed ObjectId","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232979,"status":"failed","title":"should return 400 for malformed ObjectId"},{"ancestorTitles":["Invoice Routes","GET /api/invoices/:orderId"],"duration":0,"failing":false,"failureDetails":[{"code":"ERR_HTTP_INVALID_HEADER_VALUE"}],"failureMessages":["TypeError: Invalid value \"undefined\" for header \"Authorization\"\n    at ClientRequest.setHeader (node:_http_outgoing:658:3)\n    at Test.setHeader [as request] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:830:39)\n    at Test.request [as end] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:965:8)\n    at Test.end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\supertest\\lib\\test.js:133:11)\n    at end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:283:12)\n    at new Promise (<anonymous>)\n    at Test.RequestBase.then (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:265:31)"],"fullName":"Invoice Routes GET /api/invoices/:orderId should return 404 or custom status if invoice not yet generated","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232979,"status":"failed","title":"should return 404 or custom status if invoice not yet generated"},{"ancestorTitles":["Invoice Routes","POST /api/invoices/email"],"duration":0,"failing":false,"failureDetails":[{"code":"ERR_HTTP_INVALID_HEADER_VALUE"}],"failureMessages":["TypeError: Invalid value \"undefined\" for header \"Authorization\"\n    at ClientRequest.setHeader (node:_http_outgoing:658:3)\n    at Test.setHeader [as request] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:830:39)\n    at Test.request [as end] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:965:8)\n    at Test.end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\supertest\\lib\\test.js:133:11)\n    at end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:283:12)\n    at new Promise (<anonymous>)\n    at Test.RequestBase.then (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:265:31)"],"fullName":"Invoice Routes POST /api/invoices/email should fail without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232980,"status":"failed","title":"should fail without token"},{"ancestorTitles":["Invoice Routes","POST /api/invoices/email"],"duration":0,"failing":false,"failureDetails":[{"code":"ERR_HTTP_INVALID_HEADER_VALUE"}],"failureMessages":["TypeError: Invalid value \"undefined\" for header \"Authorization\"\n    at ClientRequest.setHeader (node:_http_outgoing:658:3)\n    at Test.setHeader [as request] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:830:39)\n    at Test.request [as end] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:965:8)\n    at Test.end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\supertest\\lib\\test.js:133:11)\n    at end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:283:12)\n    at new Promise (<anonymous>)\n    at Test.RequestBase.then (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:265:31)"],"fullName":"Invoice Routes POST /api/invoices/email should allow admin to send invoice email","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232980,"status":"failed","title":"should allow admin to send invoice email"},{"ancestorTitles":["Invoice Routes","POST /api/invoices/email"],"duration":1,"failing":false,"failureDetails":[{"code":"ERR_HTTP_INVALID_HEADER_VALUE"}],"failureMessages":["TypeError: Invalid value \"undefined\" for header \"Authorization\"\n    at ClientRequest.setHeader (node:_http_outgoing:658:3)\n    at Test.setHeader [as request] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:830:39)\n    at Test.request [as end] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:965:8)\n    at Test.end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\supertest\\lib\\test.js:133:11)\n    at end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:283:12)\n    at new Promise (<anonymous>)\n    at Test.RequestBase.then (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:265:31)"],"fullName":"Invoice Routes POST /api/invoices/email should block email attempt by non-admin user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232980,"status":"failed","title":"should block email attempt by non-admin user"},{"ancestorTitles":["Invoice Routes","GET /api/invoices/download/:orderId"],"duration":0,"failing":false,"failureDetails":[{"code":"ERR_HTTP_INVALID_HEADER_VALUE"}],"failureMessages":["TypeError: Invalid value \"undefined\" for header \"Authorization\"\n    at ClientRequest.setHeader (node:_http_outgoing:658:3)\n    at Test.setHeader [as request] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:830:39)\n    at Test.request [as end] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:965:8)\n    at Test.end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\supertest\\lib\\test.js:133:11)\n    at end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:283:12)\n    at new Promise (<anonymous>)\n    at Test.RequestBase.then (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:265:31)"],"fullName":"Invoice Routes GET /api/invoices/download/:orderId should allow PDF invoice download if implemented","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232981,"status":"failed","title":"should allow PDF invoice download if implemented"},{"ancestorTitles":["Invoice Routes","GET /api/invoices/download/:orderId"],"duration":0,"failing":false,"failureDetails":[{"code":"ERR_HTTP_INVALID_HEADER_VALUE"}],"failureMessages":["TypeError: Invalid value \"undefined\" for header \"Authorization\"\n    at ClientRequest.setHeader (node:_http_outgoing:658:3)\n    at Test.setHeader [as request] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:830:39)\n    at Test.request [as end] (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\node\\index.js:965:8)\n    at Test.end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\supertest\\lib\\test.js:133:11)\n    at end (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:283:12)\n    at new Promise (<anonymous>)\n    at Test.RequestBase.then (C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\node_modules\\superagent\\src\\request-base.js:265:31)"],"fullName":"Invoice Routes GET /api/invoices/download/:orderId should return 401/403 for missing token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318232982,"status":"failed","title":"should return 401/403 for missing token"}],"endTime":1754318233682,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mInvoice Routes › GET /api/invoices/:orderId › should fail without token\u001b[39m\u001b[22m\n\n    TypeError: Invalid value \"undefined\" for header \"Authorization\"\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.setHeader [as request] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:830:39)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.request [as end] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:965:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.end (\u001b[22m\u001b[2m\u001b[0m\u001b[36mnode_modules/supertest/lib/test.js\u001b[39m\u001b[0m\u001b[2m:133:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat end (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:283:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.RequestBase.then (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:265:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mInvoice Routes › GET /api/invoices/:orderId › should return invoice for valid order (user)\u001b[39m\u001b[22m\n\n    TypeError: Invalid value \"undefined\" for header \"Authorization\"\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.setHeader [as request] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:830:39)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.request [as end] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:965:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.end (\u001b[22m\u001b[2m\u001b[0m\u001b[36mnode_modules/supertest/lib/test.js\u001b[39m\u001b[0m\u001b[2m:133:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat end (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:283:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.RequestBase.then (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:265:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mInvoice Routes › GET /api/invoices/:orderId › should return 404 or 403 for non-existent or unauthorized order\u001b[39m\u001b[22m\n\n    TypeError: Invalid value \"undefined\" for header \"Authorization\"\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.setHeader [as request] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:830:39)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.request [as end] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:965:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.end (\u001b[22m\u001b[2m\u001b[0m\u001b[36mnode_modules/supertest/lib/test.js\u001b[39m\u001b[0m\u001b[2m:133:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat end (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:283:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.RequestBase.then (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:265:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mInvoice Routes › GET /api/invoices/:orderId › should return 400 for malformed ObjectId\u001b[39m\u001b[22m\n\n    TypeError: Invalid value \"undefined\" for header \"Authorization\"\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.setHeader [as request] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:830:39)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.request [as end] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:965:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.end (\u001b[22m\u001b[2m\u001b[0m\u001b[36mnode_modules/supertest/lib/test.js\u001b[39m\u001b[0m\u001b[2m:133:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat end (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:283:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.RequestBase.then (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:265:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mInvoice Routes › GET /api/invoices/:orderId › should return 404 or custom status if invoice not yet generated\u001b[39m\u001b[22m\n\n    TypeError: Invalid value \"undefined\" for header \"Authorization\"\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.setHeader [as request] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:830:39)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.request [as end] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:965:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.end (\u001b[22m\u001b[2m\u001b[0m\u001b[36mnode_modules/supertest/lib/test.js\u001b[39m\u001b[0m\u001b[2m:133:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat end (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:283:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.RequestBase.then (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:265:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mInvoice Routes › POST /api/invoices/email › should fail without token\u001b[39m\u001b[22m\n\n    TypeError: Invalid value \"undefined\" for header \"Authorization\"\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.setHeader [as request] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:830:39)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.request [as end] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:965:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.end (\u001b[22m\u001b[2m\u001b[0m\u001b[36mnode_modules/supertest/lib/test.js\u001b[39m\u001b[0m\u001b[2m:133:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat end (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:283:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.RequestBase.then (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:265:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mInvoice Routes › POST /api/invoices/email › should allow admin to send invoice email\u001b[39m\u001b[22m\n\n    TypeError: Invalid value \"undefined\" for header \"Authorization\"\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.setHeader [as request] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:830:39)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.request [as end] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:965:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.end (\u001b[22m\u001b[2m\u001b[0m\u001b[36mnode_modules/supertest/lib/test.js\u001b[39m\u001b[0m\u001b[2m:133:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat end (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:283:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.RequestBase.then (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:265:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mInvoice Routes › POST /api/invoices/email › should block email attempt by non-admin user\u001b[39m\u001b[22m\n\n    TypeError: Invalid value \"undefined\" for header \"Authorization\"\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.setHeader [as request] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:830:39)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.request [as end] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:965:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.end (\u001b[22m\u001b[2m\u001b[0m\u001b[36mnode_modules/supertest/lib/test.js\u001b[39m\u001b[0m\u001b[2m:133:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat end (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:283:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.RequestBase.then (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:265:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mInvoice Routes › GET /api/invoices/download/:orderId › should allow PDF invoice download if implemented\u001b[39m\u001b[22m\n\n    TypeError: Invalid value \"undefined\" for header \"Authorization\"\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.setHeader [as request] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:830:39)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.request [as end] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:965:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.end (\u001b[22m\u001b[2m\u001b[0m\u001b[36mnode_modules/supertest/lib/test.js\u001b[39m\u001b[0m\u001b[2m:133:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat end (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:283:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.RequestBase.then (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:265:31)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mInvoice Routes › GET /api/invoices/download/:orderId › should return 401/403 for missing token\u001b[39m\u001b[22m\n\n    TypeError: Invalid value \"undefined\" for header \"Authorization\"\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.setHeader [as request] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:830:39)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.request [as end] (\u001b[22m\u001b[2mnode_modules/superagent/src/node/index.js\u001b[2m:965:8)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.end (\u001b[22m\u001b[2m\u001b[0m\u001b[36mnode_modules/supertest/lib/test.js\u001b[39m\u001b[0m\u001b[2m:133:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat end (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:283:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.RequestBase.then (\u001b[22m\u001b[2mnode_modules/superagent/src/request-base.js\u001b[2m:265:31)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\invoiceRoutes.test.js","startTime":1754318232181,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Vendor Routes","GET /api/vendor/analytics"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes GET /api/vendor/analytics should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318236235,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Vendor Routes","GET /api/vendor/analytics"],"duration":69,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes GET /api/vendor/analytics should fail with non-vendor token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318236245,"status":"passed","title":"should fail with non-vendor token"},{"ancestorTitles":["Vendor Routes","GET /api/vendor/analytics"],"duration":130,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes GET /api/vendor/analytics should return analytics data for vendor","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1754318236315,"status":"passed","title":"should return analytics data for vendor"},{"ancestorTitles":["Vendor Routes","GET /api/vendor/revenue"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes GET /api/vendor/revenue should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318236446,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Vendor Routes","GET /api/vendor/revenue"],"duration":77,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes GET /api/vendor/revenue should fail with non-vendor token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318236453,"status":"passed","title":"should fail with non-vendor token"},{"ancestorTitles":["Vendor Routes","GET /api/vendor/revenue"],"duration":134,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes GET /api/vendor/revenue should return revenue data for vendor","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1754318236531,"status":"passed","title":"should return revenue data for vendor"},{"ancestorTitles":["Vendor Routes","GET /api/vendor/top-products"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes GET /api/vendor/top-products should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318236666,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Vendor Routes","GET /api/vendor/top-products"],"duration":69,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes GET /api/vendor/top-products should fail with non-vendor token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318236674,"status":"passed","title":"should fail with non-vendor token"},{"ancestorTitles":["Vendor Routes","GET /api/vendor/top-products"],"duration":140,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes GET /api/vendor/top-products should return top products for vendor","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754318236745,"status":"passed","title":"should return top products for vendor"},{"ancestorTitles":["Vendor Routes","GET /api/vendor/top-customers"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes GET /api/vendor/top-customers should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318236887,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Vendor Routes","GET /api/vendor/top-customers"],"duration":72,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes GET /api/vendor/top-customers should fail with non-vendor token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318236900,"status":"passed","title":"should fail with non-vendor token"},{"ancestorTitles":["Vendor Routes","GET /api/vendor/top-customers"],"duration":131,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes GET /api/vendor/top-customers should return top customers for vendor","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754318236973,"status":"passed","title":"should return top customers for vendor"},{"ancestorTitles":["Vendor Routes","POST /api/vendor/products"],"duration":135,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes POST /api/vendor/products should allow vendor to upload product","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1754318237104,"status":"passed","title":"should allow vendor to upload product"},{"ancestorTitles":["Vendor Routes","POST /api/vendor/products"],"duration":69,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes POST /api/vendor/products should fail for non-vendor user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318237240,"status":"passed","title":"should fail for non-vendor user"},{"ancestorTitles":["Vendor Routes","PUT /api/vendor/profile"],"duration":218,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes PUT /api/vendor/profile should allow vendor to update profile","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754318237310,"status":"passed","title":"should allow vendor to update profile"},{"ancestorTitles":["Vendor Routes","PUT /api/vendor/profile"],"duration":68,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes PUT /api/vendor/profile should block profile update for non-vendor","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318237529,"status":"passed","title":"should block profile update for non-vendor"},{"ancestorTitles":["Vendor Routes","DELETE /api/vendor/products/:id"],"duration":131,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes DELETE /api/vendor/products/:id should delete vendor product if authorized","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318237598,"status":"passed","title":"should delete vendor product if authorized"},{"ancestorTitles":["Vendor Routes","DELETE /api/vendor/products/:id"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes DELETE /api/vendor/products/:id should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318237730,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Vendor Routes","DELETE /api/vendor/products/:id"],"duration":138,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Vendor Routes DELETE /api/vendor/products/:id should return 404 or 400 for non-existent product ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318237739,"status":"passed","title":"should return 404 or 400 for non-existent product ID"}],"endTime":1754318237922,"message":"","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\vendorRoutes.test.js","startTime":1754318233702,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Feedback Routes"],"duration":142,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Feedback Routes should allow second user to submit feedback","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754318241201,"status":"passed","title":"should allow second user to submit feedback"},{"ancestorTitles":["Feedback Routes"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Feedback Routes should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318241345,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Feedback Routes"],"duration":84,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Feedback Routes should return 400 for missing message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318241355,"status":"passed","title":"should return 400 for missing message"},{"ancestorTitles":["GET /api/feedback"],"duration":237,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"GET /api/feedback should allow admin to view all feedback","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754318241440,"status":"passed","title":"should allow admin to view all feedback"},{"ancestorTitles":["GET /api/feedback"],"duration":217,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"GET /api/feedback should support pagination if implemented","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318241679,"status":"passed","title":"should support pagination if implemented"},{"ancestorTitles":["GET /api/feedback"],"duration":215,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"GET /api/feedback should filter feedback by type if supported","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318241897,"status":"passed","title":"should filter feedback by type if supported"},{"ancestorTitles":["GET /api/feedback"],"duration":82,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"GET /api/feedback should block non-admin","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318242113,"status":"passed","title":"should block non-admin"},{"ancestorTitles":["GET /api/feedback"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"GET /api/feedback should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318242197,"status":"passed","title":"should fail without token"},{"ancestorTitles":["PUT /api/feedback/:id"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PUT /api/feedback/:id should allow user to update their own feedback if supported","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318242211,"status":"passed","title":"should allow user to update their own feedback if supported"},{"ancestorTitles":["PUT /api/feedback/:id"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PUT /api/feedback/:id should return 404 for non-existent feedback","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318242212,"status":"passed","title":"should return 404 for non-existent feedback"},{"ancestorTitles":["PUT /api/feedback/:id"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PUT /api/feedback/:id should return 400 for malformed ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318242226,"status":"passed","title":"should return 400 for malformed ID"},{"ancestorTitles":["PUT /api/feedback/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PUT /api/feedback/:id should block other users from editing feedback","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318242235,"status":"passed","title":"should block other users from editing feedback"},{"ancestorTitles":["DELETE /api/feedback/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DELETE /api/feedback/:id should allow admin to delete feedback","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318242236,"status":"passed","title":"should allow admin to delete feedback"},{"ancestorTitles":["DELETE /api/feedback/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DELETE /api/feedback/:id should allow user to delete own feedback if supported","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318242237,"status":"passed","title":"should allow user to delete own feedback if supported"},{"ancestorTitles":["DELETE /api/feedback/:id"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DELETE /api/feedback/:id should return 404 for non-existent feedback","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318242238,"status":"passed","title":"should return 404 for non-existent feedback"},{"ancestorTitles":["DELETE /api/feedback/:id"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DELETE /api/feedback/:id should return 400 for malformed ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318242248,"status":"passed","title":"should return 400 for malformed ID"},{"ancestorTitles":["DELETE /api/feedback/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DELETE /api/feedback/:id should block unauthorized deletion","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318242255,"status":"passed","title":"should block unauthorized deletion"}],"endTime":1754318242288,"message":"","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\feedbackRoutes.test.js","startTime":1754318238001,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Admin Routes","GET /api/admin/dashboard"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes GET /api/admin/dashboard should allow admin to view dashboard","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318245220,"status":"passed","title":"should allow admin to view dashboard"},{"ancestorTitles":["Admin Routes","GET /api/admin/dashboard"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes GET /api/admin/dashboard should block non-admin users","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318245235,"status":"passed","title":"should block non-admin users"},{"ancestorTitles":["Admin Routes","GET /api/admin/dashboard"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes GET /api/admin/dashboard should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318245244,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Admin Routes","GET /api/admin/dashboard"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes GET /api/admin/dashboard should reject invalid token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318245252,"status":"passed","title":"should reject invalid token"},{"ancestorTitles":["Admin Routes","GET /api/admin/users"],"duration":432,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes GET /api/admin/users should return user list for admin","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754318245262,"status":"passed","title":"should return user list for admin"},{"ancestorTitles":["Admin Routes","GET /api/admin/users"],"duration":245,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes GET /api/admin/users should support pagination (if implemented)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318245695,"status":"passed","title":"should support pagination (if implemented)"},{"ancestorTitles":["Admin Routes","GET /api/admin/users"],"duration":74,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes GET /api/admin/users should block non-admin","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318245941,"status":"passed","title":"should block non-admin"},{"ancestorTitles":["Admin Routes","GET /api/admin/users"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes GET /api/admin/users should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318246017,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Admin Routes","PUT /api/admin/users/:id"],"duration":29,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes PUT /api/admin/users/:id should update user role to vendor","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318246033,"status":"passed","title":"should update user role to vendor"},{"ancestorTitles":["Admin Routes","PUT /api/admin/users/:id"],"duration":24,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes PUT /api/admin/users/:id should return 400 for malformed user ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318246065,"status":"passed","title":"should return 400 for malformed user ID"},{"ancestorTitles":["Admin Routes","PUT /api/admin/users/:id"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes PUT /api/admin/users/:id should return 404 for non-existent user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318246091,"status":"passed","title":"should return 404 for non-existent user"},{"ancestorTitles":["Admin Routes","PUT /api/admin/users/:id"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes PUT /api/admin/users/:id should block user from self-escalating role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318246106,"status":"passed","title":"should block user from self-escalating role"},{"ancestorTitles":["Admin Routes","DELETE /api/admin/users/:id"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes DELETE /api/admin/users/:id should delete user if authorized","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318246119,"status":"passed","title":"should delete user if authorized"},{"ancestorTitles":["Admin Routes","DELETE /api/admin/users/:id"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes DELETE /api/admin/users/:id should return 400 for malformed ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318246133,"status":"passed","title":"should return 400 for malformed ID"},{"ancestorTitles":["Admin Routes","DELETE /api/admin/users/:id"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes DELETE /api/admin/users/:id should return 404 for non-existent user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318246145,"status":"passed","title":"should return 404 for non-existent user"},{"ancestorTitles":["Admin Routes","GET /api/admin/orders"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes GET /api/admin/orders should return all orders for admin","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318246162,"status":"passed","title":"should return all orders for admin"},{"ancestorTitles":["Admin Routes","GET /api/admin/orders"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes GET /api/admin/orders should block non-admin","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318246172,"status":"passed","title":"should block non-admin"},{"ancestorTitles":["Admin Routes","GET /api/admin/orders"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes GET /api/admin/orders should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318246181,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Admin Routes","PUT /api/admin/orders/:id/status"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes PUT /api/admin/orders/:id/status should update order status","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318246191,"status":"passed","title":"should update order status"},{"ancestorTitles":["Admin Routes","PUT /api/admin/orders/:id/status"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes PUT /api/admin/orders/:id/status should return 400 for malformed ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318246192,"status":"passed","title":"should return 400 for malformed ID"},{"ancestorTitles":["Admin Routes","PUT /api/admin/orders/:id/status"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Routes PUT /api/admin/orders/:id/status should return 404 for non-existent order","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318246200,"status":"passed","title":"should return 404 for non-existent order"}],"endTime":1754318246243,"message":"","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\adminRoutes.test.js","startTime":1754318242331,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Order Routes","POST /api/orders"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes POST /api/orders should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318249125,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Order Routes","POST /api/orders"],"duration":76,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes POST /api/orders should fail with invalid data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318249135,"status":"passed","title":"should fail with invalid data"},{"ancestorTitles":["Order Routes","POST /api/orders"],"duration":76,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes POST /api/orders should create a new order (auth required)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318249212,"status":"passed","title":"should create a new order (auth required)"},{"ancestorTitles":["Order Routes","GET /api/orders/my-orders"],"duration":219,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes GET /api/orders/my-orders should return current user’s orders","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754318249289,"status":"passed","title":"should return current user’s orders"},{"ancestorTitles":["Order Routes","GET /api/orders/my-orders"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes GET /api/orders/my-orders should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318249510,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Order Routes","GET /api/orders/:id"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes GET /api/orders/:id should fetch order by ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318249527,"status":"passed","title":"should fetch order by ID"},{"ancestorTitles":["Order Routes","GET /api/orders/:id"],"duration":141,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes GET /api/orders/:id should return 404 or 400 for non-existent ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318249529,"status":"passed","title":"should return 404 or 400 for non-existent ID"},{"ancestorTitles":["Order Routes","GET /api/orders/:id"],"duration":78,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes GET /api/orders/:id should return 400 for malformed ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318249671,"status":"passed","title":"should return 400 for malformed ID"},{"ancestorTitles":["Order Routes","GET /api/orders/:id"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes GET /api/orders/:id should fail without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318249751,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Order Routes","PUT /api/orders/:id/pay"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes PUT /api/orders/:id/pay should mark order as paid","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318249753,"status":"passed","title":"should mark order as paid"},{"ancestorTitles":["Order Routes","PUT /api/orders/:id/pay"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes PUT /api/orders/:id/pay should fail without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318249754,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Order Routes","DELETE /api/orders/:id"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes DELETE /api/orders/:id should delete order if admin","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318249755,"status":"passed","title":"should delete order if admin"},{"ancestorTitles":["Order Routes","DELETE /api/orders/:id"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes DELETE /api/orders/:id should fail without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318249756,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Order Routes","DELETE /api/orders/:id"],"duration":14,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes DELETE /api/orders/:id should return 404 or 400 for non-existent order ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318249756,"status":"passed","title":"should return 404 or 400 for non-existent order ID"},{"ancestorTitles":["Order Routes","DELETE /api/orders/:id"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Order Routes DELETE /api/orders/:id should return 400 for malformed order ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318249772,"status":"passed","title":"should return 400 for malformed order ID"}],"endTime":1754318249869,"message":"","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\orderRoutes.test.js","startTime":1754318246279,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Customer Routes","Addresses API"],"duration":216,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Customer Routes Addresses API should add a new address","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1754318252182,"status":"passed","title":"should add a new address"},{"ancestorTitles":["Customer Routes","Addresses API"],"duration":142,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Customer Routes Addresses API should get all addresses","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754318252400,"status":"passed","title":"should get all addresses"},{"ancestorTitles":["Customer Routes","Addresses API"],"duration":218,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Customer Routes Addresses API should update an address","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1754318252543,"status":"passed","title":"should update an address"},{"ancestorTitles":["Customer Routes","Addresses API"],"duration":204,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Customer Routes Addresses API should set address as default","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1754318252763,"status":"passed","title":"should set address as default"},{"ancestorTitles":["Customer Routes","Addresses API"],"duration":205,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Customer Routes Addresses API should delete an address","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754318252968,"status":"passed","title":"should delete an address"}],"endTime":1754318253210,"message":"","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\customerRoutes.test.js","startTime":1754318249903,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Product Routes","GET /api/products"],"duration":152,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Product Routes GET /api/products should return product list","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754318255503,"status":"passed","title":"should return product list"},{"ancestorTitles":["Product Routes"],"duration":150,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Product Routes POST /api/products should create a new product (admin/vendor only)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1754318255657,"status":"passed","title":"POST /api/products should create a new product (admin/vendor only)"},{"ancestorTitles":["Product Routes"],"duration":77,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Product Routes GET /api/products/:id should fetch single product","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754318255808,"status":"passed","title":"GET /api/products/:id should fetch single product"},{"ancestorTitles":["Product Routes"],"duration":147,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Product Routes PUT /api/products/:id should update product","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318255886,"status":"passed","title":"PUT /api/products/:id should update product"},{"ancestorTitles":["Product Routes"],"duration":202,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Product Routes DELETE /api/products/:id should delete product","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318256035,"status":"passed","title":"DELETE /api/products/:id should delete product"}],"endTime":1754318256260,"message":"","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\productRoutes.test.js","startTime":1754318253236,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Stripe Routes","POST /api/stripe/create-checkout-session"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Stripe Routes POST /api/stripe/create-checkout-session should reject without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318258459,"status":"passed","title":"should reject without token"},{"ancestorTitles":["Stripe Routes","POST /api/stripe/create-checkout-session"],"duration":135,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Stripe Routes POST /api/stripe/create-checkout-session should return session URL or ID for valid request","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318258468,"status":"passed","title":"should return session URL or ID for valid request"},{"ancestorTitles":["Stripe Routes","POST /api/stripe/create-checkout-session"],"duration":139,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Stripe Routes POST /api/stripe/create-checkout-session should return 400 for missing items","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318258605,"status":"passed","title":"should return 400 for missing items"},{"ancestorTitles":["Stripe Routes","POST /api/stripe/create-checkout-session"],"duration":138,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Stripe Routes POST /api/stripe/create-checkout-session should return 400 for empty items array","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318258745,"status":"passed","title":"should return 400 for empty items array"},{"ancestorTitles":["Stripe Routes","POST /api/stripe/create-checkout-session"],"duration":137,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Stripe Routes POST /api/stripe/create-checkout-session should return 400 for invalid productId","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318258884,"status":"passed","title":"should return 400 for invalid productId"},{"ancestorTitles":["Stripe Routes","POST /api/stripe/create-checkout-session"],"duration":141,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Stripe Routes POST /api/stripe/create-checkout-session should return 400 for missing success/cancel URLs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318259023,"status":"passed","title":"should return 400 for missing success/cancel URLs"},{"ancestorTitles":["Stripe Routes","POST /api/stripe/webhook"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Stripe Routes POST /api/stripe/webhook should return 400 for missing signature","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318259166,"status":"passed","title":"should return 400 for missing signature"},{"ancestorTitles":["Stripe Routes","POST /api/stripe/webhook"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Stripe Routes POST /api/stripe/webhook should reject with invalid signature","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318259179,"status":"passed","title":"should reject with invalid signature"},{"ancestorTitles":["Stripe Routes","POST /api/stripe/webhook"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Stripe Routes POST /api/stripe/webhook should accept mocked Stripe event (payment_intent.succeeded)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318259189,"status":"passed","title":"should accept mocked Stripe event (payment_intent.succeeded)"},{"ancestorTitles":["Stripe Routes","POST /api/stripe/webhook"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Stripe Routes POST /api/stripe/webhook should return 400 for unsupported event type","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318259199,"status":"passed","title":"should return 400 for unsupported event type"},{"ancestorTitles":["Stripe Routes","POST /api/stripe/webhook"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Stripe Routes POST /api/stripe/webhook should return 400 for malformed JSON","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318259208,"status":"passed","title":"should return 400 for malformed JSON"},{"ancestorTitles":["Stripe Routes","GET /api/stripe/config"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Stripe Routes GET /api/stripe/config should return publishable key from env","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318259221,"status":"passed","title":"should return publishable key from env"}],"endTime":1754318259232,"message":"","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\stripeRoutes.test.js","startTime":1754318256281,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Review Moderation Routes","GET /api/admin/reviews"],"duration":79,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes GET /api/admin/reviews should allow admin to view flagged reviews","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318261645,"status":"passed","title":"should allow admin to view flagged reviews"},{"ancestorTitles":["Review Moderation Routes","GET /api/admin/reviews"],"duration":83,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes GET /api/admin/reviews should support pagination/filtering if implemented","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318261726,"status":"passed","title":"should support pagination/filtering if implemented"},{"ancestorTitles":["Review Moderation Routes","GET /api/admin/reviews"],"duration":69,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes GET /api/admin/reviews should block non-admin access","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318261810,"status":"passed","title":"should block non-admin access"},{"ancestorTitles":["Review Moderation Routes","GET /api/admin/reviews"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes GET /api/admin/reviews should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318261880,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Review Moderation Routes","PUT /api/admin/reviews/:reviewId/hide"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes PUT /api/admin/reviews/:reviewId/hide should allow admin to hide review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318261889,"status":"passed","title":"should allow admin to hide review"},{"ancestorTitles":["Review Moderation Routes","PUT /api/admin/reviews/:reviewId/hide"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes PUT /api/admin/reviews/:reviewId/hide should be idempotent if already hidden","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318261890,"status":"passed","title":"should be idempotent if already hidden"},{"ancestorTitles":["Review Moderation Routes","PUT /api/admin/reviews/:reviewId/hide"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes PUT /api/admin/reviews/:reviewId/hide should block non-admin from hiding review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318261891,"status":"passed","title":"should block non-admin from hiding review"},{"ancestorTitles":["Review Moderation Routes","PUT /api/admin/reviews/:reviewId/hide"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes PUT /api/admin/reviews/:reviewId/hide should return 400 for malformed ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318261892,"status":"passed","title":"should return 400 for malformed ID"},{"ancestorTitles":["Review Moderation Routes","PUT /api/admin/reviews/:reviewId/hide"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes PUT /api/admin/reviews/:reviewId/hide should return 404 for non-existent review","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318261901,"status":"passed","title":"should return 404 for non-existent review"},{"ancestorTitles":["Review Moderation Routes","PUT /api/admin/reviews/:reviewId/unhide"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes PUT /api/admin/reviews/:reviewId/unhide should allow admin to unhide review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318261909,"status":"passed","title":"should allow admin to unhide review"},{"ancestorTitles":["Review Moderation Routes","PUT /api/admin/reviews/:reviewId/unhide"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes PUT /api/admin/reviews/:reviewId/unhide should be idempotent if already unhidden","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318261910,"status":"passed","title":"should be idempotent if already unhidden"},{"ancestorTitles":["Review Moderation Routes","PUT /api/admin/reviews/:reviewId/unhide"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes PUT /api/admin/reviews/:reviewId/unhide should block non-admin from unhiding review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318261910,"status":"passed","title":"should block non-admin from unhiding review"},{"ancestorTitles":["Review Moderation Routes","PUT /api/admin/reviews/:reviewId/unhide"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes PUT /api/admin/reviews/:reviewId/unhide should return 400 for malformed ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318261911,"status":"passed","title":"should return 400 for malformed ID"},{"ancestorTitles":["Review Moderation Routes","PUT /api/admin/reviews/:reviewId/unhide"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes PUT /api/admin/reviews/:reviewId/unhide should return 404 for non-existent review","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318261921,"status":"passed","title":"should return 404 for non-existent review"},{"ancestorTitles":["Review Moderation Routes","DELETE /api/admin/reviews/:reviewId"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes DELETE /api/admin/reviews/:reviewId should allow admin to permanently delete a review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318261929,"status":"passed","title":"should allow admin to permanently delete a review"},{"ancestorTitles":["Review Moderation Routes","DELETE /api/admin/reviews/:reviewId"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes DELETE /api/admin/reviews/:reviewId should block non-admin from deleting review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318261930,"status":"passed","title":"should block non-admin from deleting review"},{"ancestorTitles":["Review Moderation Routes","DELETE /api/admin/reviews/:reviewId"],"duration":74,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes DELETE /api/admin/reviews/:reviewId should return 400 for malformed ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318261930,"status":"passed","title":"should return 400 for malformed ID"},{"ancestorTitles":["Review Moderation Routes","DELETE /api/admin/reviews/:reviewId"],"duration":84,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Review Moderation Routes DELETE /api/admin/reviews/:reviewId should return 404 for non-existent review","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318262005,"status":"passed","title":"should return 404 for non-existent review"}],"endTime":1754318262118,"message":"","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\reviewModerationRoutes.test.js","startTime":1754318259265,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Flag Routes","POST /api/flags/product/:productId"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes POST /api/flags/product/:productId should fail without token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318264442,"status":"passed","title":"should fail without token"},{"ancestorTitles":["Flag Routes","POST /api/flags/product/:productId"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes POST /api/flags/product/:productId should flag a product","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318264446,"status":"passed","title":"should flag a product"},{"ancestorTitles":["Flag Routes","POST /api/flags/product/:productId"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes POST /api/flags/product/:productId should not flag with missing reason","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318264448,"status":"passed","title":"should not flag with missing reason"},{"ancestorTitles":["Flag Routes","POST /api/flags/product/:productId"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes POST /api/flags/product/:productId should return 404 for non-existent product","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318264450,"status":"passed","title":"should return 404 for non-existent product"},{"ancestorTitles":["Flag Routes","POST /api/flags/product/:productId"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes POST /api/flags/product/:productId should return 400 for malformed product ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318264466,"status":"passed","title":"should return 400 for malformed product ID"},{"ancestorTitles":["Flag Routes","POST /api/flags/review/:reviewId"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes POST /api/flags/review/:reviewId should flag a review","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318264475,"status":"passed","title":"should flag a review"},{"ancestorTitles":["Flag Routes","POST /api/flags/review/:reviewId"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes POST /api/flags/review/:reviewId should fail with missing reason","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318264476,"status":"passed","title":"should fail with missing reason"},{"ancestorTitles":["Flag Routes","POST /api/flags/review/:reviewId"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes POST /api/flags/review/:reviewId should return 404 for non-existent review","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318264476,"status":"passed","title":"should return 404 for non-existent review"},{"ancestorTitles":["Flag Routes","POST /api/flags/review/:reviewId"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes POST /api/flags/review/:reviewId should return 400 for malformed review ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318264486,"status":"passed","title":"should return 400 for malformed review ID"},{"ancestorTitles":["Flag Routes","GET /api/flags"],"duration":71,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes GET /api/flags should allow admin to view all flags","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318264496,"status":"passed","title":"should allow admin to view all flags"},{"ancestorTitles":["Flag Routes","GET /api/flags"],"duration":78,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes GET /api/flags should block non-admin user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318264568,"status":"passed","title":"should block non-admin user"},{"ancestorTitles":["Flag Routes","DELETE /api/flags/:flagId"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes DELETE /api/flags/:flagId should allow admin to delete a flag","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318264648,"status":"passed","title":"should allow admin to delete a flag"},{"ancestorTitles":["Flag Routes","DELETE /api/flags/:flagId"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes DELETE /api/flags/:flagId should block non-admin user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1754318264650,"status":"passed","title":"should block non-admin user"},{"ancestorTitles":["Flag Routes","DELETE /api/flags/:flagId"],"duration":17,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes DELETE /api/flags/:flagId should return 404 for non-existent flag","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318264652,"status":"passed","title":"should return 404 for non-existent flag"},{"ancestorTitles":["Flag Routes","DELETE /api/flags/:flagId"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Flag Routes DELETE /api/flags/:flagId should return 400 for malformed flag ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318264670,"status":"passed","title":"should return 400 for malformed flag ID"}],"endTime":1754318264700,"message":"","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\flagRoutes.test.js","startTime":1754318262149,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth Routes","POST /api/auth/register"],"duration":1274,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes POST /api/auth/register should register a new user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318265320,"status":"passed","title":"should register a new user"},{"ancestorTitles":["Auth Routes","POST /api/auth/register"],"duration":72,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes POST /api/auth/register should not allow duplicate registration","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318266595,"status":"passed","title":"should not allow duplicate registration"},{"ancestorTitles":["Auth Routes","POST /api/auth/register"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes POST /api/auth/register should return 400 for malformed email","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318266668,"status":"passed","title":"should return 400 for malformed email"},{"ancestorTitles":["Auth Routes","POST /api/auth/login"],"duration":165,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes POST /api/auth/login should login with valid credentials","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1754318266684,"status":"passed","title":"should login with valid credentials"},{"ancestorTitles":["Auth Routes","POST /api/auth/login"],"duration":136,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes POST /api/auth/login should fail with invalid credentials","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318266850,"status":"passed","title":"should fail with invalid credentials"},{"ancestorTitles":["Auth Routes","GET /api/auth/me"],"duration":84,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes GET /api/auth/me should get current user profile with token","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1754318266987,"status":"passed","title":"should get current user profile with token"},{"ancestorTitles":["Auth Routes","GET /api/auth/me"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Routes GET /api/auth/me should fail without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318267072,"status":"passed","title":"should fail without token"}],"endTime":1754318267083,"message":"","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\integration\\authRoutes.test.js","startTime":1754318264721,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Email Utils"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Email Utils sendOrderConfirmation sends a formatted email","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1754318267189,"status":"passed","title":"sendOrderConfirmation sends a formatted email"},{"ancestorTitles":["Email Utils"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Email Utils sendOrderConfirmation handles sendMail error and throws descriptive error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318267193,"status":"passed","title":"sendOrderConfirmation handles sendMail error and throws descriptive error"},{"ancestorTitles":["Email Utils"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Email Utils sendPasswordResetEmail sends a reset email with token link","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1754318267195,"status":"passed","title":"sendPasswordResetEmail sends a reset email with token link"},{"ancestorTitles":["Email Utils"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Email Utils sendPasswordResetEmail handles sendMail error and throws descriptive error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318267197,"status":"passed","title":"sendPasswordResetEmail handles sendMail error and throws descriptive error"},{"ancestorTitles":["Email Utils"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Email Utils testEmailConfig logs success in dev environment","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1754318267199,"status":"passed","title":"testEmailConfig logs success in dev environment"},{"ancestorTitles":["Email Utils"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Email Utils resetRateLimiter is a middleware function","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1754318267200,"status":"passed","title":"resetRateLimiter is a middleware function"}],"endTime":1754318267204,"message":"","name":"C:\\Users\\atdan\\OneDrive\\Desktop\\Merkato\\backend\\tests\\unit\\utils.test.js","startTime":1754318267107,"status":"passed","summary":""}],"wasInterrupted":false}
