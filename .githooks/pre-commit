#!/bin/sh
# pre-commit hook: Run all tests before allowing a commit
# Place this file at .git/hooks/pre-commit and make it executable

RED='\033[0;31m'
GREEN='\033[0;32m'
NC='\033[0m' # No Color

printf "\n${GREEN}Running backend tests...${NC}\n"
cd backend && npm test
BACKEND_STATUS=$?
cd ..

printf "\n${GREEN}Running frontend tests...${NC}\n"
cd frontend && npm test
FRONTEND_STATUS=$?
cd ..

if [ $BACKEND_STATUS -ne 0 ] || [ $FRONTEND_STATUS -ne 0 ]; then
  printf "\n${RED}Tests failed. Commit aborted.${NC}\n"
  exit 1
else
  printf "\n${GREEN}All tests passed. Proceeding with commit.${NC}\n"
fi
